@page "/"
@* Espacio de nombres del cliente generado con NSwag. *@
@using AppForSEII2526.Web.API;
@* Este es el servicio que se ha definido como HttpClien en Program.cs.*@
@inject AppForHerramientasAPIClient pruebaClient;
<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<br>
<br>

@if (_herramientas == null)
{
    //Esto hace falta, porque si no la página intenta cargarse y puede que todavía no le haya dado tiempo a traer datos desde el API
    <p><em>Cargando...</em></p>
}
else foreach (var herramienta in _herramientas)
    {
        @herramienta.Fabricante
        <br>
    }

@code{
    private ICollection<HerramientaParaRepararDTO> _herramientas;

    //Se ejecutará al cargarse la página.
    protected override async Task OnInitializedAsync()
    {
        _herramientas = await pruebaClient.GetHerramientasParaRepararAsync(null,null);
    }
}
